window.onload=function(){var c=new Phaser.Game(1024,576,Phaser.AUTO,"game");var a={create:function(){this.menubutton=c.add.button(5,5,"sona_mainmenubutton",function(){window.onblur=null;c.state.start("mainmenu")},this,1,0,2,0);this.menubutton.scale.set(0.5);var i=c.add.text(c.width/2,c.height/2,"Soon™",{font:'65px "Press Start 2P"',fill:"#ffffff",align:"center"});i.anchor.set(0.5)}};var f={create:function(){this.menubutton=c.add.button(5,5,"sona_mainmenubutton",function(){window.onblur=null;c.state.start("mainmenu")},this,1,0,2,0);this.menubutton.scale.set(0.5);var i=c.add.text(c.width/2,c.height/2,"Soon™",{font:'65px "Press Start 2P"',fill:"#ffffff",align:"center"});i.anchor.set(0.5)}};var h={create:function(){c.physics.startSystem(Phaser.Physics.ARCADE);this.buttonDown={q:false,w:false,e:false,r:false};this.overlap={q:false,w:false,e:false,r:false};this.gameover=false;this.nextButtonSpawn=0;this.hearts=3;this.pausetime=0;switch(this.difficulty){case 0:this.buttonSpeed=250;this.maxButtonSpeed=300;this.buttonInterval=1000;this.minButtonInterval=800;this.buttonSpeedIncrement=1;this.buttonIntervalDecrement=1;this.oneButtonChance=85;this.twoButtonChance=95;this.threeButtonChance=100;this.fourButtonChance=-1;break;case 1:this.buttonSpeed=300;this.maxButtonSpeed=350;this.buttonInterval=800;this.minButtonInterval=700;this.buttonSpeedIncrement=1;this.buttonIntervalDecrement=1;this.oneButtonChance=75;this.twoButtonChance=85;this.threeButtonChance=100;this.fourButtonChance=-1;break;case 2:this.buttonSpeed=350;this.maxButtonSpeed=350;this.buttonInterval=700;this.minButtonInterval=625;this.buttonSpeedIncrement=2;this.buttonIntervalDecrement=2;this.oneButtonChance=70;this.twoButtonChance=80;this.threeButtonChance=90;this.fourButtonChance=100;break;case 3:this.buttonSpeed=450;this.maxButtonSpeed=550;this.buttonInterval=625;this.minButtonInterval=475;this.buttonSpeedIncrement=3;this.buttonIntervalDecrement=3;this.oneButtonChance=60;this.twoButtonChance=75;this.threeButtonChance=85;this.fourButtonChance=100;break}this.sound1=c.add.audio("sound4",0.5,false);this.sound1.play();this.buttonSize=100;this.buttonSpacing=10;this.gamestartX=(c.width-(this.buttonSize+this.buttonSpacing)*3)/2;this.buttonsY=c.height-(this.buttonSize/2);this.bg=c.add.sprite(0,0,"sona_bg");var k=c.add.bitmapData(1,18);this.scoregradient=k.context.createLinearGradient(0,0,0,18);this.scoregradient.addColorStop(0,"#FFA50C");this.scoregradient.addColorStop(0.5,"#FFFF3A");this.scoregradient.addColorStop(1,"#FFA50C");this.scoreText=c.add.text(10,c.height-70,"Score: 0",{font:'18px "Press Start 2P"',fill:this.scoregradient});this.score=0;this.gamebg=c.add.sprite(this.gamestartX-60,c.height-720,"sona_gamebg");this.buttonq=c.add.sprite(this.gamestartX,this.buttonsY,"sona_button_q");this.buttonq.anchor.set(0.5);this.buttonq.animations.add("pressed",[1]);this.buttonq.animations.add("normal",[0]);this.buttonq.animations.play("normal");this.buttonw=c.add.sprite(this.gamestartX+this.buttonSize+this.buttonSpacing,this.buttonsY,"sona_button_w");this.buttonw.anchor.set(0.5);this.buttonw.animations.add("pressed",[1]);this.buttonw.animations.add("normal",[0]);this.buttonw.animations.play("normal");this.buttone=c.add.sprite(this.gamestartX+(this.buttonSize+this.buttonSpacing)*2,this.buttonsY,"sona_button_e");this.buttone.anchor.set(0.5);this.buttone.animations.add("pressed",[1]);this.buttone.animations.add("normal",[0]);this.buttone.animations.play("normal");this.buttonr=c.add.sprite(this.gamestartX+(this.buttonSize+this.buttonSpacing)*3,this.buttonsY,"sona_button_r");this.buttonr.anchor.set(0.5);this.buttonr.animations.add("pressed",[1]);this.buttonr.animations.add("normal",[0]);this.buttonr.animations.play("normal");this.hitBoxes=c.add.group();this.hitBoxQ=this.hitBoxes.create(this.gamestartX,this.buttonsY-this.buttonSize,"sona_hitline");this.hitBoxQ.anchor.set(0.5);this.hitBoxQ.buttonName="q";c.physics.enable(this.hitBoxQ,Phaser.Physics.ARCADE);this.hitBoxW=this.hitBoxes.create(this.gamestartX+this.buttonSize+this.buttonSpacing,this.buttonsY-this.buttonSize,"sona_hitline");this.hitBoxW.anchor.set(0.5);this.hitBoxW.buttonName="w";c.physics.enable(this.hitBoxW,Phaser.Physics.ARCADE);this.hitBoxE=this.hitBoxes.create(this.gamestartX+(this.buttonSize+this.buttonSpacing)*2,this.buttonsY-this.buttonSize,"sona_hitline");this.hitBoxE.anchor.set(0.5);this.hitBoxE.buttonName="e";c.physics.enable(this.hitBoxE,Phaser.Physics.ARCADE);this.hitBoxR=this.hitBoxes.create(this.gamestartX+(this.buttonSize+this.buttonSpacing)*3,this.buttonsY-this.buttonSize,"sona_hitline");this.hitBoxR.anchor.set(0.5);this.hitBoxR.buttonName="r";c.physics.enable(this.hitBoxR,Phaser.Physics.ARCADE);this.buttons=c.add.group();this.heartGroup=c.add.group();for(var j=0;j<this.hearts;j++){this.heartGroup.create(10+(32+10)*j,c.height-10-32,"sona_heart")}this.Qbtn=c.input.keyboard.addKey(Phaser.Keyboard.Q);this.Wbtn=c.input.keyboard.addKey(Phaser.Keyboard.W);this.Ebtn=c.input.keyboard.addKey(Phaser.Keyboard.E);this.Rbtn=c.input.keyboard.addKey(Phaser.Keyboard.R);this.Qbtn.onDown.add(function(){if(!h.overlap.q){h.loseLife()}});this.Wbtn.onDown.add(function(){if(!h.overlap.w){h.loseLife()}});this.Ebtn.onDown.add(function(){if(!h.overlap.e){h.loseLife()}});this.Rbtn.onDown.add(function(){if(!h.overlap.r){h.loseLife()}});this.menubutton=c.add.button(5,5,"sona_mainmenubutton",function(){window.onblur=null;c.sound.stopAll();c.state.start("mainmenu")},this,1,0,2,0);this.menubutton.scale.set(0.5);this.pausebutton=c.add.button(c.width-45,5,"pause_button",function(){this.pause()},this,1,0,2,0);this.mutebutton=c.add.button(c.width-85,5,"mute_button_unmuted",function(){if(c.sound.mute){c.sound.mute=false;h.mutebutton.loadTexture("mute_button_unmuted",0)}else{c.sound.mute=true;h.mutebutton.loadTexture("mute_button_muted",0)}},this,1,0,2,0);c.input.onDown.add(function(){if(c.paused&&!h.gameover){h.unpause()}if(h.gameover){h.gameOverClick()}});window.onblur=function(){h.pause()}},update:function(){if(this.hearts<=0){this.gameOver()}if(this.Qbtn.isDown){this.buttonDown.q=true}else{this.buttonDown.q=false}if(this.Wbtn.isDown){this.buttonDown.w=true}else{this.buttonDown.w=false}if(this.Ebtn.isDown){this.buttonDown.e=true}else{this.buttonDown.e=false}if(this.Rbtn.isDown){this.buttonDown.r=true}else{this.buttonDown.r=false}if(this.buttonDown.q){this.buttonq.animations.play("pressed")}else{this.buttonq.animations.play("normal")}if(this.buttonDown.w){this.buttonw.animations.play("pressed")}else{this.buttonw.animations.play("normal")}if(this.buttonDown.e){this.buttone.animations.play("pressed")}else{this.buttone.animations.play("normal")}if(this.buttonDown.r){this.buttonr.animations.play("pressed")}else{this.buttonr.animations.play("normal")}if(c.time.now>=this.nextButtonSpawn){this.nextButtonSpawn=c.time.now+this.buttonInterval;this.spawnButton()}c.physics.arcade.overlap(this.buttons,this.hitBoxes,function(i,k){if(i.buttonName==k.buttonName){if(h.buttonDown[i.buttonName]){var j=Math.abs(100-Math.abs(k.y-Math.round(i.y)));h.score+=j;if(h.buttonSpeed<h.maxButtonSpeed){h.buttonSpeed+=h.buttonSpeedIncrement;}if(h.buttonInterval>=h.minButtonInterval){h.buttonInterval-=h.buttonIntervalDecrement}this.buttons.setAll("body.velocity.y",h.buttonSpeed);i.kill();h.overlap[i.buttonName]=false}else{if(i.y>k.y+50){if(h.buttonSpeed<h.maxButtonSpeed){h.buttonSpeed+=h.buttonSpeedIncrement;}if(h.buttonInterval>=h.minButtonInterval){h.buttonInterval-=h.buttonIntervalDecrement}this.buttons.setAll("body.velocity.y",h.buttonSpeed);h.loseLife();i.kill();h.overlap[i.buttonName]=false}else{h.overlap[i.buttonName]=true}}}},null,this);this.scoreText.text="Score: "+this.score},render:function(){},spawnButton:function(){var l=c.rnd.integerInRange(0,100);var p=0;if(l<=this.oneButtonChance){p=0}else{if(l<=this.twoButtonChance){p=1}else{if(l<=this.threeButtonChance){p=2}else{if(l<=this.fourButtonChance){p=3}}}}var o=[];for(var n=0;n<=p;n++){var k=c.rnd.integerInRange(0,3);while(o.indexOf(k)!=-1){k=c.rnd.integerInRange(0,3)}o.push(k);var j=this.gamestartX+(this.buttonSize+this.buttonSpacing)*k;var m=this.buttons.create(j,0,"sona_star"+k);m.anchor.set(0.5);m.alpha=0.8;switch(k){case 0:m.buttonName="q";break;case 1:m.buttonName="w";break;case 2:m.buttonName="e";break;case 3:m.buttonName="r";break}c.physics.enable(m,Phaser.Physics.ARCADE);m.body.setSize(100,100,0,0);m.body.velocity.y=this.buttonSpeed}},pause:function(){if(!c.paused){this.pausetime=c.time.now;c.paused=true;this.pausetext=c.add.text(c.world.centerX,20,"Game Paused\n\nClick anywhere\n to unpause",{font:'24px "Press Start 2P"',fill:"#FFFF3A",align:"center",stroke:"#000",strokeThickness:7});this.pausetext.anchor.x=0.5}},unpause:function(){if(c.paused){this.pausetext.destroy();c.paused=false;this.nextButtonSpawn=this.nextButtonSpawn-this.pausetime+c.time.now}},loseLife:function(){this.hearts-=1;for(var k=this.heartGroup.length-1;k>=0;k--){var j=this.heartGroup.getAt(k);if(j.key!="sona_heartbroken"){j.loadTexture("sona_heartbroken");break}}},gameOver:function(){this.gameover=true;c.paused=true;this.gameovertext=c.add.text(c.world.centerX,20,"Game Over\n\nScore: "+this.score+"\n\nClick to return\n to main menu",{font:'24px "Press Start 2P"',fill:"#FFFF3A",align:"center",stroke:"#000",strokeThickness:7});this.gameovertext.anchor.x=0.5},gameOverClick:function(){c.paused=false;window.onblur=null;c.sound.stopAll();c.state.start("game_sona_difficulty")}};var e={create:function(){this.bg=c.add.sprite(0,0,"sona_bg");this.text=c.add.sprite(c.world.centerX,c.world.height/6,"sona_difficulty_text");this.text.anchor.set(0.5);this.menubutton=c.add.button(5,5,"sona_mainmenubutton",function(){window.onblur=null;c.state.start("mainmenu")},this,1,0,2,0);this.menubutton.scale.set(0.5);this.easybutton=c.add.button(c.world.centerX-100,c.world.height/6+30,"sona_difficulty_button_easy",function(){h.difficulty=0;c.state.start("game_sona")},this,1,0,2,0);this.mediumbutton=c.add.button(c.world.centerX-100,c.world.height/6+30+(60+10),"sona_difficulty_button_medium",function(){h.difficulty=1;c.state.start("game_sona")},this,1,0,2,0);this.hardbutton=c.add.button(c.world.centerX-100,c.world.height/6+30+(60+10)*2,"sona_difficulty_button_hard",function(){h.difficulty=2;c.state.start("game_sona")},this,1,0,2,0);this.hardcorebutton=c.add.button(c.world.centerX-100,c.world.height/6+30+(60+10)*3,"sona_difficulty_button_hardcore",function(){h.difficulty=3;c.state.start("game_sona")},this,1,0,2,0)}};var g={preload:function(){var j=c.add.bitmapData(c.width,c.height);var i=j.context.createLinearGradient(0,0,0,c.height);i.addColorStop(0,"#28002e");i.addColorStop(1,"#110012");j.context.fillStyle=i;j.context.fillRect(0,0,c.width,c.height);this.bg=c.add.tileSprite(0,0,c.width,c.height,j);this.loadtext=c.add.sprite(c.world.centerX,c.world.centerY-45,"loadingtext");this.loadtext.anchor.set(0.5);this.loadsprite=c.add.sprite(c.world.centerX-200,c.world.centerY,"loadingbar");c.load.setPreloadSprite(this.loadsprite);c.load.image("bg","assets/mainmenu/background_full.png");c.load.image("cloud1","assets/mainmenu/cloud1.png");c.load.image("cloud2","assets/mainmenu/cloud2.png");c.load.image("logo","assets/mainmenu/logo.png");c.load.spritesheet("heca_button","assets/mainmenu/heca_button.PNG",183,60);c.load.spritesheet("sona_button","assets/mainmenu/sona_button.png",183,60);c.load.spritesheet("mf_button","assets/mainmenu/mf_button.png",183,60);c.load.spritesheet("sona","assets/mainmenu/sona_idle.png",211,188,9);c.load.spritesheet("hecarim","assets/mainmenu/hecarim_idle.png",211,188,4);c.load.spritesheet("missfortune","assets/mainmenu/miss_fortune_idle.png",211,188,20);c.load.spritesheet("mute_button_muted","assets/mute_button_muted.png",40,40);c.load.spritesheet("mute_button_unmuted","assets/mute_button_unmuted.png",40,40);c.load.spritesheet("pause_button","assets/pause_button.png",40,40);c.load.spritesheet("credits_button","assets/credits.png",200,60);c.load.spritesheet("sona_button_q","assets/sona/button_q.png",100,100,2);c.load.spritesheet("sona_button_w","assets/sona/button_w.png",100,100,2);c.load.spritesheet("sona_button_e","assets/sona/button_e.png",100,100,2);c.load.spritesheet("sona_button_r","assets/sona/button_r.png",100,100,2);c.load.spritesheet("sona_mainmenubutton","assets/sona/main_menu_button.png",286,86);c.load.image("sona_hitline","assets/sona/hitline.png");c.load.image("sona_star0","assets/sona/sona_star_0.png");c.load.image("sona_star1","assets/sona/sona_star_1.png");c.load.image("sona_star2","assets/sona/sona_star_2.png");c.load.image("sona_star3","assets/sona/sona_star_3.png");c.load.image("sona_bg","assets/sona/bg.jpg");c.load.image("sona_gamebg","assets/sona/gamebg.png");c.load.image("sona_heart","assets/sona/heart.png");c.load.image("sona_heartbroken","assets/sona/heart_broken.png");c.load.spritesheet("sona_difficulty_button_easy","assets/sona_difficulty_button_easy.png",200,60);c.load.spritesheet("sona_difficulty_button_medium","assets/sona_difficulty_button_medium.png",200,60);c.load.spritesheet("sona_difficulty_button_hard","assets/sona_difficulty_button_hard.png",200,60);c.load.spritesheet("sona_difficulty_button_hardcore","assets/sona_difficulty_button_hardcore.png",200,60);c.load.image("sona_difficulty_text","assets/difficulty_select_text.png")},create:function(){c.physics.startSystem(Phaser.Physics.ARCADE);this.music=c.add.audio("mainmenumusic",0.2,true);this.music.play();this.bg=c.add.sprite(0,0,"bg");this.bg.scale.x=(c.width)/1280;this.bg.scale.y=(c.height)/720;var k=(c.height*(720-116)/720)-188;this.hecarim=c.add.sprite(266,k,"hecarim");this.hecarim.animations.add("idle");this.hecarim.animations.play("idle",2,true);this.mf=c.add.sprite(470,k,"missfortune");this.mf.animations.add("idle");this.mf.animations.play("idle",3,true);this.sona=c.add.sprite(650,k,"sona");this.sona.animations.add("idle");this.sona.animations.play("idle",3,true);this.cloud1=c.add.sprite(10,130,"cloud1");c.physics.enable(this.cloud1,Phaser.Physics.ARCADE);this.cloud1.body.setSize(316,76);this.cloud1.body.velocity.x=50;this.cloud2=c.add.sprite(450,90,"cloud2");c.physics.enable(this.cloud2,Phaser.Physics.ARCADE);this.cloud2.body.setSize(318,104);this.cloud2.body.velocity.x=50;this.logo=c.add.sprite(c.world.centerX,150,"logo");this.logo.anchor.set(0.5);c.physics.enable(this.logo,Phaser.Physics.ARCADE);var l=c.add.group();var j=(c.width-(186+10)*3)/2;var m=c.height-78;var i=c.add.button(j+186,m,"sona_button",function(){g.music.stop();c.state.start("game_sona_difficulty")},this,1,0,2,0);l.add(i);this.mutebutton=c.add.button(c.width-45,5,"mute_button_unmuted",function(){if(c.sound.mute){c.sound.mute=false;g.mutebutton.loadTexture("mute_button_unmuted",0)}else{c.sound.mute=true;g.mutebutton.loadTexture("mute_button_muted",0)}},this,1,0,2,0);this.creditsbutton=c.add.button(5,5,"credits_button",function(){window.onblur=null;c.sound.stopAll();c.state.start("credits")},this,1,0,2,0);this.creditsbutton.scale.set(0.7)},update:function(){if(this.cloud1.x>c.width){this.cloud1.x=0-this.cloud1.width}if(this.cloud2.x>c.width){this.cloud2.x=0-this.cloud1.width}this.cloud1.body.velocity.y=Math.cos(this.cloud1.x/40)*5;this.cloud2.body.velocity.y=Math.cos(this.cloud2.x/35)*5;this.logo.body.velocity.y=(Math.cos(c.time.now/400)*40)*0.25},render:function(){}};var d={create:function(){var j="Developers:\n\nIcEaGe - zsozso5800@gmail.com\n\nDesigners:\n\nNidzulaa - nixozz96@gmail.com\n\nMusic:\n\nPulvermoose by Rymdkraft\nArcade Hero by Felguk";var k=c.add.bitmapData(c.width,c.height);var i=k.context.createLinearGradient(0,0,0,c.height);i.addColorStop(0,"#28002e");i.addColorStop(1,"#110012");k.context.fillStyle=i;k.context.fillRect(0,0,c.width,c.height);this.bg=c.add.tileSprite(0,0,c.width,c.height,k);this.menubutton=c.add.button(5,5,"sona_mainmenubutton",function(){window.onblur=null;c.state.start("mainmenu")},this,1,0,2,0);this.menubutton.scale.set(0.5);this.gameovertext=c.add.text(c.world.centerX,20,j,{font:'24px "Press Start 2P"',fill:"#FFFF3A",align:"center",stroke:"#000",strokeThickness:7});this.gameovertext.anchor.x=0.5}};var b={preload:function(){c.load.image("decodingtext","assets/decoding_audio_text.png");c.load.image("loadingbar","assets/loadingbar.png");c.load.image("loadingtext","assets/loadingtext.png");c.load.audio("mainmenumusic","assets/sound/sound1.ogg");c.load.audio("sound4","assets/sound/sound4.ogg")},create:function(){var j=c.add.bitmapData(c.width,c.height);var i=j.context.createLinearGradient(0,0,0,c.height);i.addColorStop(0,"#28002e");i.addColorStop(1,"#110012");j.context.fillStyle=i;j.context.fillRect(0,0,c.width,c.height);this.bg=c.add.tileSprite(0,0,c.width,c.height,j);var k=c.add.sprite(c.width/2,c.height/2,"decodingtext");k.anchor.set(0.5)},update:function(){if(this.cache.isSoundDecoded("mainmenumusic")&&this.cache.isSoundDecoded("sound4")){c.state.start("mainmenu")}}};c.state.add("game_hecarim",a);c.state.add("game_missfortune",f);c.state.add("game_sona",h);c.state.add("game_sona_difficulty",e);c.state.add("mainmenu",g);c.state.add("credits",d);c.state.add("boot",b);c.state.start("boot")};